{"mappings":"iiBAEA,IAuEMA,E,EAjEEC,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EAEAC,EAEAC,EAjBRC,EAAAC,EAAA,S,oDAMQV,EAAeW,SAASC,eAAe,gBACvCX,EAAgBU,SAASC,eAAe,iBACxCV,EAAYS,SAASC,eAAe,cAEpCT,EAAYQ,SAASC,eAAe,aACpCR,EAAaO,SAASC,eAAe,cACrCP,EAAaM,SAASE,cAAc,kBACpCP,EAAcK,SAASE,cAAc,mBAErCN,EAAcI,SAASC,eAAe,eAEtCJ,EAAW,IAAI,EAAAM,EAAAC,oBACrBC,OAAOC,YAAa,EACpBD,OAAOE,QAAU,GAIjBf,EAAUgB,QAAU,W,OAAM,EAAAL,EAAAM,iBAAgBC,EAAAC,KAAMd,E,EAChDH,EAAWc,QAAU,W,OAAM,EAAAL,EAAAM,iBAAgBC,EAAAC,KAAMd,E,EAEjDJ,EAAWe,QAAU,W,OACnB,EAAAL,EAAAS,SAAQF,EAAAC,MACLE,MAAK,WACJR,OAAOC,YAAa,C,IAErBQ,OAAM,SAAAC,G,KAGXpB,EAAYa,QAAU,W,OACpB,EAAAL,EAAAS,SAAQF,EAAAC,MACLE,MAAK,WACJR,OAAOC,YAAa,C,IAErBQ,OAAM,SAAAC,G,KAIXL,EAAAC,KAAKK,oBAAmB,SAAAC,GAClBA,GAEFvB,EAAWwB,UAAUC,IAAI,UACzBxB,EAAYuB,UAAUE,OAAO,UAC7B/B,EAAa6B,UAAUE,OAAO,UAC9B9B,EAAc4B,UAAUC,IAAI,UAC5BvB,EAAYyB,UAAY,aAA8BC,OAAjBL,EAAKM,YAAY,UACtDhC,EAAU2B,UAAUE,OAAO,UAC3Bf,OAAOE,SAAU,IAGjBb,EAAWwB,UAAUE,OAAO,UAC5BzB,EAAYuB,UAAUC,IAAI,UAC1B9B,EAAa6B,UAAUC,IAAI,UAC3B7B,EAAc4B,UAAUE,OAAO,UAC/BxB,EAAYyB,UAAY,GACxB9B,EAAU2B,UAAUC,IAAI,UACxBd,OAAOE,SAAU,GAEiC,IAA9CF,OAAOmB,SAASC,KAAKC,OAAO,gBAC9BC,QAAQC,IAAIvB,OAAOmB,SAASC,MAC5BpB,OAAOmB,SAASC,KAAO,c,IAQ7Bf,EAAAC,KAAKK,oB,EAAmBa,EAAA/B,EAAA,CAAA+B,EAAAC,GAAAC,MAAA,SAAAC,EAAMf,G,kEACxBA,GAGFZ,OAAOC,YAAa,EACpBD,OAAOE,QAAUU,EAAKgB,IAEtB7C,GAAc,EAAA8C,EAAAC,aAAW,EAAAzB,EAAA0B,KAAI1B,EAAA2B,GAAI,QAASpB,EAAKgB,IAAIK,aAAa,SAAAC,GAC9DZ,QAAQC,IAAI,iBAAkBW,EAAIC,O,KAIpCpD,GAAeA,I,oDAZW6B,G","sources":["src/js/firebase.js"],"sourcesContent":["// // Import the functions you need from the SDKs you need\n\nimport { onSnapshot } from 'firebase/firestore';\nimport { signInWithPopup, signOut, GoogleAuthProvider } from 'firebase/auth';\nimport { db, auth, doc } from './global';\n\n//\nconst loginHandling = () => {\n  const whenSignedIn = document.getElementById('whenSignedIn');\n  const whenSignedOut = document.getElementById('whenSignedOut');\n  const myLibrary = document.getElementById('libraryBtn');\n\n  const signInBtn = document.getElementById('signInBtn');\n  const signOutBtn = document.getElementById('signOutBtn');\n  const signInIcon = document.querySelector('svg.icon-login');\n  const signOutIcon = document.querySelector('svg.icon-logout');\n\n  const userDetails = document.getElementById('userDetails');\n\n  const provider = new GoogleAuthProvider();\n  window.userSigned = false;\n  window.userUid = '';\n\n  /// Sign in event handlers\n\n  signInBtn.onclick = () => signInWithPopup(auth, provider);\n  signInIcon.onclick = () => signInWithPopup(auth, provider);\n\n  signOutBtn.onclick = () =>\n    signOut(auth)\n      .then(() => {\n        window.userSigned = false;\n      })\n      .catch(error => {\n        // An error happened.\n      });\n  signOutIcon.onclick = () =>\n    signOut(auth)\n      .then(() => {\n        window.userSigned = false;\n      })\n      .catch(error => {\n        // An error happened.\n      });\n\n  auth.onAuthStateChanged(user => {\n    if (user) {\n      // signed in\n      signInIcon.classList.add('hidden');\n      signOutIcon.classList.remove('hidden');\n      whenSignedIn.classList.remove('hidden');\n      whenSignedOut.classList.add('hidden');\n      userDetails.innerHTML = `<h3>Hello ${user.displayName}!</h3>`;\n      myLibrary.classList.remove('hidden');\n      window.userUid = true;\n    } else {\n      // not signed in\n      signInIcon.classList.remove('hidden');\n      signOutIcon.classList.add('hidden');\n      whenSignedIn.classList.add('hidden');\n      whenSignedOut.classList.remove('hidden');\n      userDetails.innerHTML = '';\n      myLibrary.classList.add('hidden');\n      window.userUid = false;\n\n      if (window.location.href.search('index.html') === -1) {\n        console.log(window.location.href);\n        window.location.href = 'index.html';\n      }\n    }\n  });\n  ///// Firestore /////\n\n  let unsubscribe;\n\n  auth.onAuthStateChanged(async user => {\n    if (user) {\n      // Database Reference\n\n      window.userSigned = true;\n      window.userUid = user.uid;\n\n      unsubscribe = onSnapshot(doc(db, 'films', user.uid.toString()), doc => {\n        console.log('Current data: ', doc.data());\n      });\n    } else {\n      // Unsubscribe when the user signs out\n      unsubscribe && unsubscribe();\n    }\n  });\n};\nloginHandling();\n"],"names":["unsubscribe","whenSignedIn","whenSignedOut","myLibrary","signInBtn","signOutBtn","signInIcon","signOutIcon","userDetails","provider","$bpxeT","parcelRequire","document","getElementById","querySelector","$gQOBw","GoogleAuthProvider","window","userSigned","userUid","onclick","signInWithPopup","$6yrqd","auth","signOut","then","catch","error","onAuthStateChanged","user","classList","add","remove","innerHTML","concat","displayName","location","href","search","console","log","$parcel$interopDefault","$2TvXO","mark","_callee","uid","$6m2hf","onSnapshot","doc","db","toString","doc1","data"],"version":3,"file":"index.a7f3f393.js.map"}