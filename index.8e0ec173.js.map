{"mappings":"iiBAEA,IAsEIA,E,EAtEJC,EAAAC,EAAA,S,oDAKMC,EAAeC,SAASC,eAAe,gBACvCC,EAAgBF,SAASC,eAAe,iBACxCE,EAAYH,SAASC,eAAe,cAEpCG,EAAYJ,SAASC,eAAe,aACpCI,EAAaL,SAASC,eAAe,cACrCK,EAAaN,SAASO,cAAc,kBACpCC,EAAcR,SAASO,cAAc,mBAErCE,EAAcT,SAASC,eAAe,eAEtCS,EAAW,IAAI,EAAAC,EAAAC,oBACrBC,OAAOC,YAAa,EACpBD,OAAOE,QAAU,GAIjBX,EAAUY,QAAU,W,OAAM,EAAAL,EAAAM,iBAAgBC,EAAAC,KAAMT,E,EAChDJ,EAAWU,QAAU,W,OAAM,EAAAL,EAAAM,iBAAgBC,EAAAC,KAAMT,E,EAEjDL,EAAWW,QAAU,W,OACnB,EAAAL,EAAAS,SAAQF,EAAAC,MACLE,MAAK,WACJR,OAAOC,YAAa,C,IAErBQ,OAAM,SAAAC,G,KAGXf,EAAYQ,QAAU,W,OACpB,EAAAL,EAAAS,SAAQF,EAAAC,MACLE,MAAK,WACJR,OAAOC,YAAa,C,IAErBQ,OAAM,SAAAC,G,KAIXL,EAAAC,KAAKK,oBAAmB,SAAAC,GAClBA,GAEFnB,EAAWoB,UAAUC,IAAI,UACzBnB,EAAYkB,UAAUE,OAAO,UAC7B7B,EAAa2B,UAAUE,OAAO,UAC9B1B,EAAcwB,UAAUC,IAAI,UAC5BlB,EAAYoB,UAAY,aAA8BC,OAAjBL,EAAKM,YAAY,UACtD5B,EAAUuB,UAAUE,OAAO,UAC3Bf,OAAOE,SAAU,IAGjBT,EAAWoB,UAAUE,OAAO,UAC5BpB,EAAYkB,UAAUC,IAAI,UAC1B5B,EAAa2B,UAAUC,IAAI,UAC3BzB,EAAcwB,UAAUE,OAAO,UAC/BnB,EAAYoB,UAAY,GACxB1B,EAAUuB,UAAUC,IAAI,UACxBd,OAAOE,SAAU,GAEiC,IAA9CF,OAAOmB,SAASC,KAAKC,OAAO,gBAC9BC,QAAQC,IAAIvB,OAAOmB,SAASC,MAC5BpB,OAAOmB,SAASC,KAAO,c,IAQ7Bf,EAAAC,KAAKK,oB,EAAmBa,EAAAxC,EAAA,CAAAwC,EAAAC,GAAAC,MAAA,SAAAC,EAAMf,G,kEACxBA,GAGFZ,OAAOC,YAAa,EACpBD,OAAOE,QAAUU,EAAKgB,IAEtB7C,GAAc,EAAA8C,EAAAC,aAAW,EAAAzB,EAAA0B,KAAI1B,EAAA2B,GAAI,QAASpB,EAAKgB,IAAIK,aAAa,SAAAC,GAC9DZ,QAAQC,IAAI,iBAAkBW,EAAIC,O,KAIpCpD,GAAeA,I,oDAZW6B,G","sources":["src/js/firebase.js"],"sourcesContent":["// // Import the functions you need from the SDKs you need\n\nimport { onSnapshot } from 'firebase/firestore';\nimport { signInWithPopup, signOut, GoogleAuthProvider } from 'firebase/auth';\nimport { db, auth, doc } from './global';\n\n//\nconst whenSignedIn = document.getElementById('whenSignedIn');\nconst whenSignedOut = document.getElementById('whenSignedOut');\nconst myLibrary = document.getElementById('libraryBtn');\n\nconst signInBtn = document.getElementById('signInBtn');\nconst signOutBtn = document.getElementById('signOutBtn');\nconst signInIcon = document.querySelector('svg.icon-login');\nconst signOutIcon = document.querySelector('svg.icon-logout');\n\nconst userDetails = document.getElementById('userDetails');\n\nconst provider = new GoogleAuthProvider();\nwindow.userSigned = false;\nwindow.userUid = '';\n\n/// Sign in event handlers\n\nsignInBtn.onclick = () => signInWithPopup(auth, provider);\nsignInIcon.onclick = () => signInWithPopup(auth, provider);\n\nsignOutBtn.onclick = () =>\n  signOut(auth)\n    .then(() => {\n      window.userSigned = false;\n    })\n    .catch(error => {\n      // An error happened.\n    });\nsignOutIcon.onclick = () =>\n  signOut(auth)\n    .then(() => {\n      window.userSigned = false;\n    })\n    .catch(error => {\n      // An error happened.\n    });\n\nauth.onAuthStateChanged(user => {\n  if (user) {\n    // signed in\n    signInIcon.classList.add('hidden');\n    signOutIcon.classList.remove('hidden');\n    whenSignedIn.classList.remove('hidden');\n    whenSignedOut.classList.add('hidden');\n    userDetails.innerHTML = `<h3>Hello ${user.displayName}!</h3>`;\n    myLibrary.classList.remove('hidden');\n    window.userUid = true;\n  } else {\n    // not signed in\n    signInIcon.classList.remove('hidden');\n    signOutIcon.classList.add('hidden');\n    whenSignedIn.classList.add('hidden');\n    whenSignedOut.classList.remove('hidden');\n    userDetails.innerHTML = '';\n    myLibrary.classList.add('hidden');\n    window.userUid = false;\n\n    if (window.location.href.search('index.html') === -1) {\n      console.log(window.location.href);\n      window.location.href = 'index.html';\n    }\n  }\n});\n///// Firestore /////\n\nlet unsubscribe;\n\nauth.onAuthStateChanged(async user => {\n  if (user) {\n    // Database Reference\n\n    window.userSigned = true;\n    window.userUid = user.uid;\n\n    unsubscribe = onSnapshot(doc(db, 'films', user.uid.toString()), doc => {\n      console.log('Current data: ', doc.data());\n    });\n  } else {\n    // Unsubscribe when the user signs out\n    unsubscribe && unsubscribe();\n  }\n});\n"],"names":["$db0a627a18027f51$var$unsubscribe","$bpxeT","parcelRequire","$db0a627a18027f51$var$whenSignedIn","document","getElementById","$db0a627a18027f51$var$whenSignedOut","$db0a627a18027f51$var$myLibrary","$db0a627a18027f51$var$signInBtn","$db0a627a18027f51$var$signOutBtn","$db0a627a18027f51$var$signInIcon","querySelector","$db0a627a18027f51$var$signOutIcon","$db0a627a18027f51$var$userDetails","$db0a627a18027f51$var$provider","$gQOBw","GoogleAuthProvider","window","userSigned","userUid","onclick","signInWithPopup","$6yrqd","auth","signOut","then","catch","error","onAuthStateChanged","user","classList","add","remove","innerHTML","concat","displayName","location","href","search","console","log","$parcel$interopDefault","$2TvXO","mark","_callee","uid","$6m2hf","onSnapshot","doc","db","toString","doc1","data"],"version":3,"file":"index.8e0ec173.js.map"}